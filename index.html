<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Himeraspedizioni</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; color: #333;}
h1,h2 {color: #222;}
.container {max-width: 900px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
#header-logo {display:flex; align-items:center; gap:15px; margin-bottom:20px;}
#header-logo img {width:80px; height:auto;}
#header-logo h1 {margin:0; font-size:24px; color:#007BFF;}
#header-logo p {margin:4px 0 0; font-size:16px; color:#555;}
.section {margin-bottom:30px;}
.section h2 {border-bottom:2px solid #ccc; padding-bottom:5px;}
label {display:block; margin-top:10px;}
input,textarea,select {width:100%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc; box-sizing:border-box;}
.form-side-by-side {display:flex; gap:20px; flex-wrap:wrap;}
.form-side-by-side > div {flex:1 1 45%; min-width:300px; background:#f5f5f5; padding:15px; border-radius:8px; box-sizing:border-box;}
.tariffe {display:flex; gap:20px; flex-wrap:wrap;}
table {border-collapse:collapse; width:100%; margin-top:10px;}
th,td {border:1px solid #aaa; padding:8px; text-align:center;}
.submit-btn {margin-top:20px; padding:10px 20px; background:#007BFF; color:white; border:none; border-radius:5px; cursor:pointer;}
.submit-btn:hover {background:#0056b3;}
#termini-content {display:none; background:#e9ecef; padding:15px; border-radius:8px; margin-top:10px; max-height:300px; overflow-y:auto; font-size:14px; line-height:1.4;}
.calendar-container {margin-top:1rem; display:flex; flex-direction:column; max-width:300px;}
.calendar-wrapper {position:relative;}
.calendar-wrapper input[type="date"] {width:100%; padding:10px 12px 10px 36px; font-size:16px; border:1px solid #ccc; border-radius:6px; appearance:none;}
.calendar-wrapper::before {content:"ðŸ“…"; position:absolute; top:50%; left:10px; transform:translateY(-50%); font-size:18px; pointer-events:none;}
button.remove-pacco {margin-left:10px; cursor:pointer;}
.info-card {flex:1 1 300px; background:#f5faff; padding:20px; border:1px solid #cce5ff; border-radius:12px;}
.info-card h2 {color:#007BFF; margin-top:0; font-size:20px;}
.info-card a {color:#007BFF; text-decoration:none;}
</style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div id="header-logo">
        <img src="logo.png" alt="Logo Himeraspedizioni">
        <div>
            <h1>Himeraspedizioni</h1>
            <p>Modulo Spedizione</p>
        </div>
    </div>

    <!-- Consigli imballaggio -->
    <div class="section">
        <h2>ðŸ“¦ Consigli per l'imballaggio</h2>
        <ul>
            <li>Usa scatole robuste e resistenti.</li>
            <li>Proteggi gli oggetti fragili con pluriball o materiale da imballaggio.</li>
            <li>Chiudi bene la scatola con nastro adesivo rinforzato.</li>
            <li>Non superare le dimensioni e i pesi massimi indicati nelle tariffe.</li>
        </ul>
    </div>

    <!-- Procedura acquisto -->
    <div class="section">
        <h2>ðŸ›’ Procedura per l'acquisto della spedizione</h2>
        <ol>
            <li>Compila i dati del mittente e del destinatario.</li>
            <li>Aggiungi uno o piÃ¹ pacchi specificando peso, dimensioni e zona di spedizione.</li>
            <li>Seleziona la data del ritiro.</li>
            <li>Accetta i termini e condizioni.</li>
            <li>Invia il modulo e completa il pagamento tramite Postepay o bonifico.</li>
            <li>Invia la ricevuta di pagamento tramite WhatsApp o email.</li>
        </ol>
    </div>

    <!-- Modulo spedizione -->
    <form id="spedizione-form" action="https://formsubmit.co/termini.imerese@postaexpress.it" method="POST">
        <div class="form-side-by-side">
            <div>
                <h2>Dati del Mittente</h2>
                <label>Nome e Cognome / Ragione Sociale
                    <input type="text" name="mittente_nome" required>
                </label>
                <label>Via/Piazza
                    <input type="text" name="mittente_via" required>
                </label>
                <label>Numero civico
                    <input type="text" name="mittente_numero" required>
                </label>
                <label>CAP
                    <input type="text" name="mittente_cap" required>
                </label>
                <label>CittÃ 
                    <input type="text" name="mittente_citta" required>
                </label>
                <label>Provincia
                    <input type="text" name="mittente_provincia" required>
                </label>
                <label>Nazione
                    <input type="text" name="mittente_nazione" required>
                </label>
                <label>Email
                    <input type="email" name="mittente_email">
                </label>
                <label>Telefono / WhatsApp
                    <input type="text" name="mittente_telefono" required>
                </label>
                <label>Codice Fiscale / P.IVA
                    <input type="text" name="mittente_cf">
                </label>
                <label>Note per il corriere
                    <textarea name="mittente_note"></textarea>
                </label>
            </div>
            <div>
                <h2>Dati del Destinatario</h2>
                <label>Nome e Cognome / Ragione Sociale
                    <input type="text" name="destinatario_nome" required>
                </label>
                <label>Via/Piazza
                    <input type="text" name="destinatario_via" required>
                </label>
                <label>Numero civico
                    <input type="text" name="destinatario_numero" required>
                </label>
                <label>CAP
                    <input type="text" name="destinatario_cap" required>
                </label>
                <label>CittÃ 
                    <input type="text" name="destinatario_citta" required>
                </label>
                <label>Provincia
                    <input type="text" name="destinatario_provincia" required>
                </label>
                <label>Nazione
                    <input type="text" name="destinatario_nazione" required>
                </label>
                <label>Email
                    <input type="email" name="destinatario_email">
                </label>
                <label>Telefono / WhatsApp
                    <input type="text" name="destinatario_telefono" required>
                </label>
                <label>Note per la consegna
                    <textarea name="destinatario_note"></textarea>
                </label>
            </div>
        </div>

        <!-- Sezione pacchi -->
        <div class="section tariffe">
            <fieldset>
                <legend>Dati del pacco</legend>
                <label>Peso (kg): <input type="number" id="peso" step="0.01" min="0"></label>
                <label>Lunghezza (cm): <input type="number" id="lunghezza" step="0.1" min="0"></label>
                <label>Larghezza (cm): <input type="number" id="larghezza" step="0.1" min="0"></label>
                <label>Altezza (cm): <input type="number" id="altezza" step="0.1" min="0"></label>
                <label>Zona spedizione:
                    <select id="zona">
                        <option value="nazionale">Nazionale</option>
                        <option value="europa">Europa</option>
                    </select>
                </label>
                <button type="button" id="aggiungi-pacco">Aggiungi pacco</button>
            </fieldset>
            <div id="lista-pacchi" style="margin-top:20px;">
                <h3>Pacchi inseriti:</h3>
                <ul style="list-style:none; padding-left:0;"></ul>
            </div>
            <p id="totale-paga" class="submit-btn">Totale: â‚¬0.00 - Paga</p>
        </div>

        <!-- Selezione data ritiro -->
        <div class="calendar-container">
            <label for="pickupDate">Seleziona la data del ritiro</label>
            <div class="calendar-wrapper">
                <input type="date" id="pickupDate" name="pickupDate" required>
            </div>
        </div>

        <!-- Termini e condizioni -->
        <label>
            <input type="checkbox" id="accetto_condizioni" name="accetto_condizioni" required> Accetto i termini e condizioni
        </label>
        <div id="termini-content">
            <p>Questo sito Web Ã¨ gestito da Himeraspedizioni. I tempi di consegna sono indicativi. La societÃ  non Ã¨ responsabile per ritardi o danni dei corrieri.</p>
        </div>

        <input type="hidden" name="_next" value="https://tuo-sito.github.io/grazie.html">
        <input type="hidden" name="_captcha" value="false">

        <button type="submit" class="submit-btn">Invia spedizione</button>
    </form>

    <!-- Tariffe -->
    <div class="section tariffe">
        <div style="flex:1; min-width:300px;">
            <h2>Tariffe Nazionali (SDA)</h2>
            <table>
                <tr><th>Peso</th><th>Prezzo</th></tr>
                <tr><td>0â€“10kg</td><td>10 â‚¬</td></tr>
                <tr><td>10â€“30kg</td><td>13.90 â‚¬</td></tr>
                <tr><td colspan="2">Misura max: altezza+larghezza+lunghezza 150 cm</td></tr>
            </table>
        </div>
        <div style="flex:1; min-width:300px;">
            <h2>Tariffe Europa (UPS)</h2>
            <table>
                <tr><th>Peso</th><th>Prezzo</th></tr>
                <tr><td>0â€“10kg</td><td>30 â‚¬</td></tr>
                <tr><td>10â€“20kg</td><td>35 â‚¬</td></tr>
                <tr><td>20â€“30kg</td><td>40 â‚¬</td></tr>
                <tr><td colspan="2">Misura max: altezza+larghezza+lunghezza 150 cm</td></tr>
            </table>
        </div>
    </div>

    <!-- Assistenza e pagamenti -->
    <div class="section" style="display:flex; gap:20px; flex-wrap:wrap;">
        <div class="info-card">
            <h2>ðŸ“ž Assistenza</h2>
            <p>ðŸ“© <a href="mailto:solazzomarco@libero.it">solazzomarco@libero.it</a></p>
            <p>ðŸ“± <a href="https://wa.me/393299836841" target="_blank">+39 329 983 6841</a></p>
        </div>
        <div class="info-card">
            <h2>ðŸ’³ Metodi di pagamento</h2>
            <p><strong>Postepay:</strong> 5333 1711 6485 4388 intestata a Solazzo Marco</p>
            <p><strong>Bonifico:</strong> IBAN IT40D0760104600000096256433 intestato a Solazzo Marco</p>
            <p>Inviare ricevuta di pagamento via WhatsApp o email con causale "Pagamento spedizione Nome Cognome e data ordine"</p>
        </div>
    </div>
</div>

<script>
// Selezione data minima
const dateInput = document.getElementById('pickupDate');
const today = new Date(); today.setDate(today.getDate() + 1);
dateInput.min = today.toISOString().split('T')[0];

// Gestione pacchi
const listaPacchi = document.querySelector("#lista-pacchi ul");
const aggiungiBtn = document.getElementById("aggiungi-pacco");
const totaleBtn = document.getElementById("totale-paga");
aggiungiBtn.addEventListener("click", () => {
    const peso = parseFloat(document.getElementById("peso").value);
    const lunghezza = parseFloat(document.getElementById("lunghezza").value);
    const larghezza = parseFloat(document.getElementById("larghezza").value);
    const altezza = parseFloat(document.getElementById("altezza").value);
    const zona = document.getElementById("zona").value;
    if(!peso||!lunghezza||!larghezza||!altezza){alert("Compila tutti i campi del pacco"); return;}
    if(peso<=0 || peso>30){alert("Peso fuori range"); return;}
    if((lunghezza+larghezza+altezza)>150){alert("Dimensioni superano 150 cm"); return;}
    const li = document.createElement("li");
    li.textContent=`Peso: ${peso}kg, Dimensioni: ${lunghezza}x${larghezza}x${altezza} cm, Zona: ${zona}`;
    const btnRimuovi = document.createElement("button"); btnRimuovi.textContent="ðŸ—‘ï¸"; btnRimuovi.className="remove-pacco";
    btnRimuovi.addEventListener("click",()=>{li.remove(); aggiornaTotale();});
    li.appendChild(btnRimuovi);
    const inputHidden = document.createElement("input");
    inputHidden.type="hidden"; inputHidden.name="pacchi[]"; inputHidden.value=JSON.stringify({peso,lunghezza,larghezza,altezza,zona});
    li.appendChild(inputHidden);
    listaPacchi.appendChild(li);
    aggiornaTotale();
});
function aggiornaTotale(){
    let totale=0;
    listaPacchi.querySelectorAll("input[name='pacchi[]']").forEach(input=>{
        const p=JSON.parse(input.value);
        if(p.zona==="nazionale"){totale += p.peso<=10?10:13.9;} else {totale += p.peso<=10?30:p.peso<=20?35:40;}
    });
    totaleBtn.textContent=`Totale: â‚¬${totale.toFixed(2)} - Paga`;
}
</script>
</body>
</html>
